---
description: Deployment workflow for Railway and Netlify
---

# Deployment Workflow

## Backend Deployment (Railway)
```bash
# 1. Build and test locally
cd server
npm run build

# 2. Commit changes
cd ..
git add .
git commit -m "Auto-commit: $(date +%Y-%m-%d_%H:%M:%S) - Description"
git push origin main

# 3. Deploy to Railway
cd server
railway up
```

## Frontend Deployment (Netlify)
```bash
# 1. Build frontend
npm run build

# 2. Deploy to Netlify
netlify deploy --prod --dir=dist
```

## Database Migrations
```bash
# Create migration
railway run npx prisma migrate dev --name descriptive_name

# Deploy migration
railway run npx prisma migrate deploy

# Generate client
railway run npx prisma generate
```

## Testing After Deployment
1. **Test Backend**: `curl https://backend-production-80f6.up.railway.app/debug/schema`
2. **Test Frontend**: Visit `https://ubiquitous-sherbet-b4f6bf.netlify.app/`
3. **Test File Upload**: Upload CSV file
4. **Test Dashboard**: Verify data displays correctly

## Common Issues
- **Build Failures**: Check TypeScript errors, run `npm run build`
- **Deployment Failures**: Check Railway logs, verify environment variables
- **Schema Mismatches**: Run migrations, test with debug endpoint
- **Frontend Not Updating**: Run `netlify deploy --prod --dir=dist`

## Critical Rules
- ✅ Always build locally before deploying
- ✅ Commit changes before deployment
- ✅ Test endpoints after deployment
- ✅ Run migrations when schema changes
- ✅ Verify both frontend and backend work