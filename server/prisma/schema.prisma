generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Organization {
  id        String   @id @default(uuid())
  name      String
  createdAt DateTime @default(now())
  users     Membership[]
  files     File[]
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  orgs      Membership[]
}

model Membership {
  id     String @id @default(uuid())
  role   String
  user   User   @relation(fields: [userId], references: [id])
  userId String
  org    Organization @relation(fields: [orgId], references: [id])
  orgId  String
}

model File {
  id             String   @id @default(uuid())
  org            Organization @relation(fields: [orgId], references: [id])
  orgId          String
  name           String
  size           BigInt
  uploadedAt     DateTime @default(now())
  storageKey     String
  customerName   String?
  accountManager String?
  schemaVersion  String   @default("1.0.0")
  rows           CampaignRow[]
  settings       FileSettings?
}

model CampaignRow {
  id              BigInt  @id @default(autoincrement())
  file            File    @relation(fields: [fileId], references: [id])
  fileId          String
  g√∂nder_app      String  @map("app")
  campaign_network String
  adgroup_network String
  day             DateTime
  installs        Int
  ecpi            Decimal? @db.Decimal(20,10)
  cost            Decimal? @db.Decimal(20,10)
  all_revenue     Decimal? @db.Decimal(20,10)
  roas_d0         Decimal? @db.Decimal(20,10)
  roas_d1         Decimal? @db.Decimal(20,10)
  roas_d2         Decimal? @db.Decimal(20,10)
  roas_d3         Decimal? @db.Decimal(20,10)
  roas_d4         Decimal? @db.Decimal(20,10)
  roas_d5         Decimal? @db.Decimal(20,10)
  roas_d6         Decimal? @db.Decimal(20,10)
  roas_d7         Decimal? @db.Decimal(20,10)
  roas_d14        Decimal? @db.Decimal(20,10)
  roas_d21        Decimal? @db.Decimal(20,10)
  roas_d30        Decimal? @db.Decimal(20,10)
  roas_d45        Decimal? @db.Decimal(20,10)
  createdAt       DateTime @default(now())
}

model FileSettings {
  file       File   @relation(fields: [fileId], references: [id])
  fileId     String @id
  settings   Json
  updatedBy  String?
  updatedAt  DateTime @default(now())
}


